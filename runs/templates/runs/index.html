{% extends "runs/base.html" %}
{% load widget_tweaks %}

{% block content %}
  <div class="content-section">
    <form method="POST">
      {% csrf_token %}
      <legend class="mb-4">Save a run</legend>
      <div class="form-row">
        <div class="col">
          {{ form.distance.label_tag }}
          <div class="input-group">
            {{ form.distance|attr:"value:0.0"|attr:"width:500" }}
            {{ form.units }}
          </div>
        </div>
        <div class="col-9">
          <label for="id_duration">Duration:</label>
          <div class="input-group">
            {{ form.duration|add_class:"time-input" }}
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="col">
          {{ form.date.label_tag }}
          {{ form.date|attr:"id:datepicker"|attr:"width:200px" }}
        </div>
      </div>
      <div class="form-row">
        <div class="col mt-2">
          <button class="btn btn-outline-info" type="submit">Save</button>
        </div>
      </div>
    </form>
  </div>
  <div class="content-section">
    <h1>Runs</h1>
    {% for run in runs %}
      <div class="row border-top pt-2">
        <div class="col">
          <div class="row">
            <div class="col-10"><h3>{{ run.date|date:'Y-m-d' }}</h3></div>
            {% if user.id == run.user_id %}
              <div class="col">
                <a class="btn btn-outline-warning" href="#">Edit</a>
                <a class="btn btn-outline-danger" href="{% url 'runs:delete' run.id %}">Delete</a>
              </div>
            {% endif %}
          </div>
          <div class="row">
            <div class="col">
              <p>{{ run.distance }} {{ run.units }}
                {% if run.duration %}
                  - {{ run.duration }}</p>
                {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}